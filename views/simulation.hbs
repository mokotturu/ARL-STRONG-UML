<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Monish Reddy Kotturu">
	<link rel="stylesheet" type="text/css" href="/css/simulation.css"/>
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
	<link rel="icon" href="/img/favicon.png" type="image/png">
	<script src="https://kit.fontawesome.com/4240eddcaa.js" crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
	<title>ARL STRONG UML | Simulation</title>
</head>

<body>
	<div class="loader"></div>
	<div class="progressbar"><div class="progress background"><p>0%</p></div></div>
	<div class="body-container">
		<div class="popup-modal-container" id="trust-cue-modal">
			<div class="popup-modal" id="trust-cue-modal-content">
				<h2 style="color: white;font-size: 26px;">Agent 1 says:</h2>
				<div class="trustCueMessage">
					Testing...
				</div>
				<div class="userInputButtons">
					<button onclick = "hideTrustMessage()">OK</button>
				</div>
			</div>
		</div>

		<div class="popup-modal-container" id="trust-confirm-modal">
			<div class="popup-modal" id="trust-confirm-modal-content">
				<h2 id="trustConfirmQuestion" style="color: white;font-size: 26px;">Do you want to integrate the map and score of the robot to the overall score?</h2>
				<h3 style="color: white;font-size: 18px;">You can see the results after making a decision.</h3>
				<div class="userInputButtons">
					<button onclick="confirmExploration()">Integrate</button>
					<button onclick="undoExploration()">Discard</button>
				</div>
			</div>
		</div>
		
		<div class="popup-modal-container" id="exploration-details-modal">
			<div class="popup-modal" id="exploration-details-modal-content">
				<div class="map-info">
					<div id="images-container">
						<div class="explored stackImgContainer">
							<div class="img-split">
								<img src="#" id="minimapAgentOverlay" alt="Entire Map 2">
							</div>
							<div class="img-split">
								<img src="#" id="minimap" alt="Entire Map 1">
							</div>
						</div>
						
						<div class="explored">
							<img src="#" id="bot-image" alt="Agent explored area">
						</div>
						<div class="explored">
							<img src="#" id="human-image" alt="Human explored area">
						</div>
					</div>
					<div class="headings-container">
						<p>Entire map</p>
						<p class="agent-text">Agent explored area</p>
						<p>Human explored area</p>
					</div>
				</div>
				<div class="scores">
					{{!-- Team score block --}}
					<div id="oScore" class="scoreBlock">
						<div>
							<p style="margin: 0.5em;">Overall Team Performance Score</p>
							<div class="resultsBlockItemWrapper">
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="overallTeamScoreNegative" class="scoreText"></p>
										<div id="overallTeamScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="overallTeamScorePositiveGraph" class="positiveScore graph"></div>
										<p id="overallTeamScorePositive" class="scoreText"></p>
									</div>
								</div>
							</div>
						</div>
						<div>
							<p style="margin: 0.5em;">Overall Individual Performance Scores</p>
							<div class="resultsBlockItemWrapper">
								<p>Agent</p>
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="overallAgentIndScoreNegative" class="scoreText"></p>
										<div id="overallAgentIndScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="overallAgentIndScorePositiveGraph" class="positiveScore graph"></div>
										<p id="overallAgentIndScorePositive" class="scoreText"></p>
									</div>
								</div>
								<p>Human</p>
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="overallHumanIndScoreNegative" class="scoreText"></p>
										<div id="overallHumanIndScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="overallHumanIndScorePositiveGraph" class="positiveScore graph"></div>
										<p id="overallHumanIndScorePositive" class="scoreText"></p>
									</div>
								</div>
							</div>
						</div>
					</div>
					{{!-- Agent score block --}}
					<div id="aScore" class="scoreBlock">
						<p>Agent targets and scores</p>
						<div class="playerBlockHorizontalWrapper">
							<div class="resultsBlockItemWrapper">
								<div class="aYellowStar resultsBlockItemLeft"></div>
								<div class="aRedCircle resultsBlockItemRight"></div>
								<div class="aPinkTriangle resultsBlockItemRight"></div>
							</div>
							<div class="resultsBlockItemWrapper">
								<p>Robot team score in this round</p>
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="agentTeamScoreNegative" class="scoreText"></p>
										<div id="agentTeamScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="agentTeamScorePositiveGraph" class="positiveScore graph"></div>
										<p id="agentTeamScorePositive" class="scoreText"></p>
									</div>
								</div>
								<p>Agent individual score in this round</p>
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="agentIndScoreNegative" class="scoreText"></p>
										<div id="agentIndScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="agentIndScorePositiveGraph" class="positiveScore graph"></div>
										<p id="agentIndScorePositive" class="scoreText"></p>
									</div>
								</div>
							</div>
						</div>
					</div>
					{{!-- Human score block --}}
					<div id="hScore" class="scoreBlock">
						<p>Human targets and scores</p>
						<div class="playerBlockHorizontalWrapper">
							<div class="resultsBlockItemWrapper">
								<div class="hYellowStar resultsBlockItemLeft"></div>
								<div class="hRedCircle resultsBlockItemRight"></div>
								<div class="hPinkTriangle resultsBlockItemRight"></div>
							</div>
							<div class="resultsBlockItemWrapper">
								<p>Human team score</p>
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="humanTeamScoreNegative" class="scoreText"></p>
										<div id="humanTeamScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="humanTeamScorePositiveGraph" class="positiveScore graph"></div>
										<p id="humanTeamScorePositive" class="scoreText"></p>
									</div>
								</div>
								<p>Human individual score</p>
								<div class="graphResultsBlockItemWrapper">
									<div class="negativeScoreGraph resultsBlockItemLeft">
										<p id="humanIndScoreNegative" class="scoreText"></p>
										<div id="humanIndScoreNegativeGraph" class="negativeScore graph"></div>
									</div>
									<svg id="bar" viewBox="0 0 3 30" style="width: 3px; height: 30px; padding: 0 1px;">
										<polygon points="0 0, 3 0, 3 30, 0 30" fill="black" style="stroke-linejoin: round;"></polygon>
									</svg>
									<div class="positiveScoreGraph resultsBlockItemRight">
										<div id="humanIndScorePositiveGraph" class="positiveScore graph"></div>
										<p id="humanIndScorePositive" class="scoreText"></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="tableItems"></div>
				<div class="userInputButtons">
					<button onclick="showPostIntegratePrompt()">Continue</button>
				</div>
			</div>
		</div>
		<div id="simulation">
			<div id="info">
				<div id="legend">
					{{!-- <div class="icon"><span class="fillSpan" style="background-color: #9999ff; border-radius: 7px;"></span></div>
					<p>Human explored region</p>
					<div class="icon"><span class="fillSpan" style="background-color: #99ffb7; border-radius: 7px;"></span></div>
					<p>Agent explored region</p> --}}
					<div class="icon"><span class="material-icons" style="color: #ffc72c; font-size: 35px;";>star_rate</span></div>
					<p>+100 Team, 0 Individual</p>
					<div class="icon"><svg id="triangle" viewBox="0 0 30 30"><polygon points="15 2, 30 26, 0 26" fill="#ff48ff"/></svg></div>
					<p>-100 Team, +100 Individual</p>
					<div class="icon"><span class="material-icons" style="color: #ff4848; font-size: 30px;";>circle</span></div>
					<p>-100 Team, 0 Individual</p>
				</div>
				<div id="gameDetails">
					<div id="timer">Time elapsed: 0s</div>
					{{!-- <hr style="width: 90%;">
					<div id="teamScoreMain" style="font-size: 18px;">Team Score: 0</div>
					<div id="humanIndMain" style="font-size: 18px;">Human Individual Score: 0</div>
					<div id="agentIndMain" style="font-size: 18px;">Agent Individual Score: 0</div> --}}
				</div>
			</div>
			<div id="map-container">
				<canvas width="4000" height="4000" id="map" oncontextmenu="return false;"></canvas>
			</div>
		</div>

		<div class="popup-modal-container" id="endRoundQContainer">
			<div class="popup-modal" id="endRoundQContent">
				<h1 id="q3PromptTitle">Please respond to the following questions:</h1>
				<p id="intervalSurveyRQMsg" class="requiredMessage">Please fill out all the fields.</p>
				<form name="intervalSurvey" id="intervalSurvey" onsubmit="return false;">
					<div class="questionContainer">
						<h4>Please rate the performance of the robot in this search and rescue task so far<br>(1 = poor performance, 7 = excellent performance).</h4>
						<div class="optionsContainer">
							<label for="oneOne" class="radio-inline grid-item"><input id="oneOne" type="radio" name="performanceRating" value="1">1</label>
							<label for="oneTwo" class="radio-inline grid-item"><input id="oneTwo" type="radio" name="performanceRating" value="2">2</label>
							<label for="oneThree" class="radio-inline grid-item"><input id="oneThree" type="radio" name="performanceRating" value="3">3</label>
							<label for="oneFour" class="radio-inline grid-item"><input id="oneFour" type="radio" name="performanceRating" value="4">4</label>
							<label for="oneFive" class="radio-inline grid-item"><input id="oneFive" type="radio" name="performanceRating" value="5">5</label>
							<label for="oneSix" class="radio-inline grid-item"><input id="oneSix" type="radio" name="performanceRating" value="6">6</label>
							<label for="oneSeven" class="radio-inline grid-item"><input id="oneSeven" type="radio" name="performanceRating" value="7">7</label>
						</div>
					</div>
					<div class="questionContainer">
						<h4>Please rate the robot as a teammate<br>(1 = poor teammate, 7 = excellent teammate).</h4>
						<div class="optionsContainer">
							<label for="twoOne"  class="radio-inline grid-item"><input id="twoOne" type="radio" name="teammateRating" value="1">1</label>
							<label for="twoTwo" class="radio-inline grid-item"><input id="twoTwo" type="radio" name="teammateRating" value="2">2</label>
							<label for="twoThree" class="radio-inline grid-item"><input id="twoThree" type="radio" name="teammateRating" value="3">3</label>
							<label for="twoFour" class="radio-inline grid-item"><input id="twoFour" type="radio" name="teammateRating" value="4">4</label>
							<label for="twoFive" class="radio-inline grid-item"><input id="twoFive" type="radio" name="teammateRating" value="5">5</label>
							<label for="twoSix" class="radio-inline grid-item"><input id="twoSix" type="radio" name="teammateRating" value="6">6</label>
							<label for="twoSeven" class="radio-inline grid-item"><input id="twoSeven" type="radio" name="teammateRating" value="7">7</label>
						</div>
					</div>
					<div class="questionContainer">
						<h4>What influenced your decision to integrate/discard the map the most?</h4>
						<div class="fullWidthOptions">
							<label for="longOne" class="fullWidthOption grid-item"><input id="longOne" type="radio" name="decisionInfluence" value="1" onclick="toggleTextInput()">Good performance of the robot in last round</label>
							<label for="longTwo" class="fullWidthOption grid-item"><input id="longTwo" type="radio" name="decisionInfluence" value="2" onclick="toggleTextInput()">Bad performance of the robot in last round</label>
							<label for="longThree" class="fullWidthOption grid-item"><input id="longThree" type="radio" name="decisionInfluence" value="3" onclick="toggleTextInput()">Overall good performance of the robot up to this point</label>
							<label for="longFour" class="fullWidthOption grid-item"><input id="longFour" type="radio" name="decisionInfluence" value="4" onclick="toggleTextInput()">Overall bad performance of the robot up to this point</label>
							<label for="longFive" class="fullWidthOption grid-item" id="otherRadioButton"><input id="longFive" type="radio" name="decisionInfluence" value="5" onclick="toggleTextInput()">
								Other
								<input type="text" name="decisionInfluenceText" id="decisionInfluenceText" class="hideTextArea" placeholder="Please mention why"><sup class="hideTextArea" style="font-size: 11px;color: red; display: none; align-self: flex-start;">*</sup>
							</label>
						</div>
					</div>
				</form>
				<div class="userInputButtons">
					<button id="submitendRoundQ" onclick="updateTrustMessage()">Submit</button>
				</div>
			</div>
		</div>

		<div class="popup-modal-container" id="endGameQContainer">
			<div class="popup-modal" id="endGameQContent">
				<h1 id="endGameQPromptTitle">Please respond to the following questions:</h1>
				<p id="endGameSurveyRQMsg" class="requiredMessage">Please fill out all the fields.</p>
				<form name="endGameSurvey" id="endGameSurvey" onsubmit="return false;">
					<div class="questionContainer">
						<h4>
							How many rounds of the game did you play?
							<sup style="font-size: 11px;color: red;">*</sup>
						</h4>
						<div class="optionsContainer">
							<label for="endOneOne" class="radio-inline grid-item"><input id="endOneOne" type="radio" name="roundsPlayed" value="5">5</label>
							<label for="endOneTwo" class="radio-inline grid-item"><input id="endOneTwo" type="radio" name="roundsPlayed" value="13">13</label>
							<label for="endOneThree" class="radio-inline grid-item"><input id="endOneThree" type="radio" name="roundsPlayed" value="7">7</label>
							<label for="endOneFour" class="radio-inline grid-item"><input id="endOneFour" type="radio" name="roundsPlayed" value="10">10</label>
						</div>
					</div>
					<div class="questionContainer">
						<h4>
							The team scores gained by the robot in the last two rounds were:
							<sup style="font-size: 11px;color: red;">*</sup>
						</h4>
						<div class="optionsContainer">
							<label for="endTwoOne"  class="radio-inline grid-item"><input id="endTwoOne" type="radio" name="lastTwoRounds" value="pos-pos">Positive, Positive</label>
							<label for="endTwoTwo" class="radio-inline grid-item"><input id="endTwoTwo" type="radio" name="lastTwoRounds" value="pos-neg">Positive, Negative</label>
							<label for="endTwoThree" class="radio-inline grid-item"><input id="endTwoThree" type="radio" name="lastTwoRounds" value="neg-neg">Negative, Negative</label>
							<label for="endTwoFour" class="radio-inline grid-item"><input id="endTwoFour" type="radio" name="lastTwoRounds" value="neg-pos">Negative, Positive</label>
						</div>
					</div>
				</form>
				<div class="userInputButtons">
					<button id="submitendRoundQ" onclick="terminate()">Submit</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Load the CDN first -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

	<!-- If CDN fails to load, then serve up the local version -->
	<script>window.jQuery || document.write('<script src="js/jquery-3.5.1.min.js"><\/script>')</script>
	<script type="text/javascript" src="/js/jcanvas.min.js"></script>
	<script type="text/javascript" src="/js/new_simulation.js"></script>
</body>
</html>
